{% extends "base.html" %}
{% block content %}
<h3>Your Cart</h3>
{% if items %}
<table class="table">
  <thead><tr><th>Product</th><th>Qty</th><th>Line</th><th></th></tr></thead>
  <tbody>
    {% for it in items %}
      <tr>
        <td>{{ it.product.title }}</td>
        <td>{{ it.qty }}</td>
        <td>₹ {{ "%.2f"|format(it.line_total) }}</td>
        <td>
          <form method="post" action="{{ url_for('remove_from_cart', pid=it.product.id) }}">
            <button class="btn btn-sm btn-danger">Remove</button>
          </form>
        </td>
      </tr>
    {% endfor %}
  </tbody>
</table>
<p class="fw-bold">Subtotal: ₹ {{ "%.2f"|format(subtotal) }}</p>
{% if current_user.is_authenticated %}
  <a class="btn btn-primary" href="{{ url_for('checkout') }}">Checkout</a>
{% else %}
  <a class="btn btn-secondary" href="{{ url_for('login') }}">Login to Checkout</a>
{% endif %}
{% else %}
<p>Your cart is empty.</p>
{% endif %}
{% endblock %}
